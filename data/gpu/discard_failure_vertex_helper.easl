(struct VertexOutput
  @{location 0} x: f32
  @{builtin position} pos: vec4f)

(defn discard-or-double [x: f32]: f32
  (if (< x 0.)
    (discard)
    (* x 2.)))

@vertex
(defn v2 [@{builtin vertex-index}
          vertex-index: u32]: VertexOutput
  (VertexOutput (discard-or-double 0.)
                (vec4f 0.)))
