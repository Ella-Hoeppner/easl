(enum (Option T) None (Some T))

(struct (TwoOf T)
  a: T
  b: T)

(defn (map T U) [o: (Option T) f: (Fn [T] U)]: (Option U)
  (match o
    (Some x) (Some (f x))
    None None))

(defn (make-two-of T) [x: T]: (TwoOf T)
  (TwoOf x x))

(defn (make-two-of-inside T) [o: (Option T)]: (Option (TwoOf T))
  (map o make-two-of))

(defn main []
  (let [x (Some 0.5)]
    (print (make-two-of-inside x))))