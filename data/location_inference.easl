(struct VertexOutput1
  @builtin position: vec4f
  red-and-green: vec2f
  blue: f32)

@vertex
(defn vertex-1 [@builtin vertex-index: u32
                @builtin instance-index: u32]: VertexOutput1
  (let [corner (match vertex-index
                 0 (vec2f -1.)
                 1 (vec2f -1. 3.)
                 _ (vec2f 3. -1.))]
    (VertexOutput1 (vec4f corner 0. 1.)
                   corner
                   0.5)))

@fragment
(defn fragment-1 [in: VertexOutput1]: vec4f
  (vec4f in.red-and-green in.blue 1.))

(struct VertexOutput2
  @builtin position: vec4f
  red: f32
  @{location 0} green: f32
  blue: f32)

@vertex
(defn vertex-2 [@builtin vertex-index: u32
                @builtin instance-index: u32]: VertexOutput2
  (let [corner (match vertex-index
                 0 (vec2f -1.)
                 1 (vec2f -1. 3.)
                 _ (vec2f 3. -1.))]
    (VertexOutput2 (vec4f corner 0. 1.)
                   corner.x
                   corner.y
                   0.5)))

@fragment
(defn fragment-2 [in: VertexOutput2]: vec4f
  (vec4f in.red in.green in.blue 1.))
