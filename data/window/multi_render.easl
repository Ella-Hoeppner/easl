@vertex
(defn v1 [@{builtin vertex-index}
          vertex-index: u32]: @{builtin position} vec4f
  (vec4f (match vertex-index
           0 (vec2f -0.5 -0.5)
           1 (vec2f -0.5 -0.3)
           _ (vec2f -0.3 -0.5))
         0.
         1.))

@vertex
(defn v2 [@{builtin vertex-index}
          vertex-index: u32]: @{builtin position} vec4f
  (vec4f (match vertex-index
           0 (vec2f 0.5 -0.5)
           1 (vec2f 0.5 -0.3)
           _ (vec2f 0.3 -0.5))
         0.
         1.))

@fragment
(defn f1 [@{builtin position} pos: vec4f]: @{location 0} vec4f
  (vec4f 1. 0. 0. 1.))

@cpu
(defn main []
  (spawn-window (fn []
                    (dispatch-shaders v1 f1 3)
                    (dispatch-shaders v2 f1 3))))
