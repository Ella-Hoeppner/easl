@vertex
(defn my-vertex [@{builtin vertex-index}
                 vertex-index: u32]: @{builtin position} vec4f
  (vec4f (match vertex-index
           0 (vec2f -1.)
           1 (vec2f -1. 3.)
           _ (vec2f 3. -1.))
         0.
         1.))

@fragment
(defn my-fragment [@{builtin position} pos: vec4f]: @{location 0} vec4f
  (vec4f (* 0.001 pos.x)
         0.
         (* 0.001 pos.y)
         1.))

(defn f []
  (dispatch-shader my-vertex my-fragment 3))

@cpu
(defn main []
  (f))
